{"name": "test_get_example", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"button\", name=\"创建记录\").nth(2)", "trace": "@allure.step(\"Test create a new record\")\n    def test_get_example():\n        with allure.step(\"Initialize Playwright and browser\"):\n            with sync_playwright() as p:\n                browser = p.chromium.launch(headless=False)\n                context = browser.new_context()\n    \n                # Inject the script to set localStorage items before any page loads\n                jwt_token = \"Bearer eyJraWQiOiI3ZTAwZWRjZC1mY2Q0LTQ5M2YtYmUxYy0yZWQ1ZDI0NWQxMDUiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyOWUxZWZjNy02MThjLTQ0YWEtYWMwYS0wOTMyYjY0OGVhZTQiLCJpc3MiOiJodHRwczovL2FwaS5zdGFnaW5nLmNvc2NlbmUuY24vc3VwZXJ0b2tlbnMtc2VydmVyL2F1dGgiLCJleHAiOjE3Mzk0MjY4MDcsInVzZXJJZCI6IjI5ZTFlZmM3LTYxOGMtNDRhYS1hYzBhLTA5MzJiNjQ4ZWFlNCIsImlhdCI6MTczNjgzNDgwNiwib3JnSWQiOiJjZjc0NmUyMy0zMjEwLTRiOGYtYmRmYS1mYjc3MWQxYWM4N2MifQ.AyKI5ltZF8Rhl7GB6hdETtdzP7rEgLcmAJMjBecO6KKok_no1OwfWvtrA9EVUhoj5dbuSsd_hpAE-AqJAIhz5ZEperai63hxJzMBKk4b0_e6_Ky5Kq-CIRSwQpixHndUF18RA3o6VLdDJPgrdgWmQHksK-ef20gO6IyEqSB5EmhiB6ZEto39DXc9M76IyUExEtOthDgPHi__OGRwb5_uIOmlUAq9f4x3eP_aMRg2dry2Bm6TMvHb58Gu1Q8VNOOguEWjWuZCKGjRD0GOo0mbvFL1xpIJkUYoGdKaERhkLUY9g42T41THU0Ux-0I5wqKyYbZF_HZbjVk415BRcClc0A\"\n                if not jwt_token:\n                    raise ValueError(\"CN_JWT environment variable is not set\")\n    \n                with allure.step(\"Set JWT in localStorage\"):\n                    context.add_init_script(f\"\"\"\n                        localStorage.setItem('coScene_org_jwt', '{jwt_token}');\n                        localStorage.setItem('i18nextLng', 'en');\n                    \"\"\")\n    \n                page = context.new_page()\n    \n                with allure.step(\"Navigate to the records page\"):\n                    page.goto(\"https://staging.coscene.cn/coscene-lark/bubbl/records\")\n    \n                with allure.step(\"Reload the records page with JWT\"):\n                    page.goto(\"https://staging.coscene.cn/coscene-lark/bubbl/records\", timeout=3 * 60 * 1000)\n    \n                with allure.step(\"Click on '创建记录' button\"):\n>                   page.get_by_role(\"button\", name=\"创建记录\").nth(2).click()\n\ntests\\testcases\\record\\test_CreateRecord.py:33: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv\\lib\\site-packages\\playwright\\sync_api\\_generated.py:15398: in click\n    self._sync(\n.venv\\lib\\site-packages\\playwright\\_impl\\_locator.py:156: in click\n    return await self._frame.click(self._selector, strict=True, **params)\n.venv\\lib\\site-packages\\playwright\\_impl\\_frame.py:488: in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x00000198A157B310>, cb = <function Channel.send.<locals>.<lambda> at 0x00000198A14A0DC0>, is_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nE           Call log:\nE           waiting for get_by_role(\"button\", name=\"创建记录\").nth(2)\n\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:520: TargetClosedError"}, "steps": [{"name": "Test create a new record", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"button\", name=\"创建记录\").nth(2)\n\n", "trace": "  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\tests\\testcases\\record\\test_CreateRecord.py\", line 33, in test_get_example\n    page.get_by_role(\"button\", name=\"创建记录\").nth(2).click()\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 15398, in click\n    self._sync(\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 156, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_frame.py\", line 488, in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 520, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n"}, "steps": [{"name": "Initialize Playwright and browser", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"button\", name=\"创建记录\").nth(2)\n\n", "trace": "  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\tests\\testcases\\record\\test_CreateRecord.py\", line 33, in test_get_example\n    page.get_by_role(\"button\", name=\"创建记录\").nth(2).click()\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 15398, in click\n    self._sync(\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 156, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_frame.py\", line 488, in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 520, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n"}, "steps": [{"name": "Set JWT in localStorage", "status": "passed", "start": 1741580487059, "stop": 1741580487072}, {"name": "Navigate to the records page", "status": "passed", "start": 1741580487250, "stop": 1741580489841}, {"name": "Reload the records page with JWT", "status": "passed", "start": 1741580489841, "stop": 1741580490478}, {"name": "Click on '创建记录' button", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"button\", name=\"创建记录\").nth(2)\n\n", "trace": "  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\tests\\testcases\\record\\test_CreateRecord.py\", line 33, in test_get_example\n    page.get_by_role(\"button\", name=\"创建记录\").nth(2).click()\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 15398, in click\n    self._sync(\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 156, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_frame.py\", line 488, in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n  File \"C:\\Users\\chenyue\\Documents\\GitHub\\bubbl\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 520, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n"}, "start": 1741580490478, "stop": 1741580494914}], "start": 1741580486446, "stop": 1741580495111}], "start": 1741580486446, "stop": 1741580495111}], "start": 1741580486446, "stop": 1741580495112, "uuid": "834d6fdc-ea99-4823-be94-5711fe010c97", "historyId": "2ca64e810c765ea07e95fd498c0c6a41", "testCaseId": "2ca64e810c765ea07e95fd498c0c6a41", "fullName": "tests.testcases.record.test_CreateRecord#test_get_example", "labels": [{"name": "parentSuite", "value": "tests.testcases.record"}, {"name": "suite", "value": "test_CreateRecord"}, {"name": "host", "value": "DESKTOP-6FM4MLI"}, {"name": "thread", "value": "21768-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.testcases.record.test_CreateRecord"}]}